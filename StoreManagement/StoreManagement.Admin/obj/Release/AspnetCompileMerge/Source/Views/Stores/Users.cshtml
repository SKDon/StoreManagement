@using StoreManagement.Admin.Models
@using StoreManagement.Data.Entities
@model List<StoreManagement.Admin.Models.UserProfile>
@{
    ViewBag.Title = "Users";
    Store s = ViewBag.Store;
    
    var userName = new LoginModel();
    var roles = (List<Role>)ViewBag.Roles;
}

<h2>Users of @s.Name</h2>

@using (Html.BeginForm("SaveStoreUsers", "Stores", FormMethod.Get))
{
    @Html.AntiForgeryToken()
    @Html.ValidationSummary(true)
    <fieldset>
        <legend>Create User</legend>
        
        <input type="hidden" name="id" value="@s.Id"/>

        <div class="editor-label control-group">
            @Html.LabelFor(model => userName.UserName, new { @class = "control-label" })
        </div>
        <div class="editor-field controls">
            @Html.EditorFor(model => userName.UserName, new { @class = "input-xlarge" })
            @Html.ValidationMessageFor(model => userName.UserName)
        </div>
        <div class="editor-label control-group">
            @Html.LabelFor(model => userName.Password, new { @class = "control-label" })
        </div>
        <div class="editor-field controls">
            @Html.EditorFor(model => userName.Password, new { @class = "input-xlarge" })
        </div>

        @foreach (var r in roles)
        {
            <div>
                @Html.RadioButton("roleName", r.RoleName) @r.RoleName
            </div>
        }

        <p>
            <input type="submit" value="Create" />
        </p>
    </fieldset>
}


<table class='table table-hover table-bordered table-striped'>
    <tr>
        <th>UserName  
        </th>
        <th></th>
    </tr>
    @foreach (var item in Model)
    {
        <tr>
            <td>
                @Html.DisplayFor(modelItem => item.UserName)
            </td>
            <td>
                @Html.ActionLink("DeleteUser", "DeleteUserProfile", new { id = item.UserId })
            </td>

        </tr>
    }
</table>
