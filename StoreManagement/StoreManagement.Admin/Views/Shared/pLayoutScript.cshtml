@Scripts.Render("~/bundles/bootstrap")
@Scripts.Render("~/bundles/vendors")

<script src="~/Scripts/storeManagement.js"></script>
<script src="~/Scripts/imageGallery.js"></script>
<script src="~/Scripts/jquery.datetimepicker.js"></script>
<script src="~/Scripts/colpick.js"></script>
<script src="~/Scripts/chosen.proto.min.js"></script>
<link href="~/Content/chosen.css" rel="stylesheet" />
<script src="~/Scripts/chosen.jquery.min.js"></script>


<script>
    (function (i, s, o, g, r, a, m) {
        i['GoogleAnalyticsObject'] = r; i[r] = i[r] || function () {
            (i[r].q = i[r].q || []).push(arguments)
        }, i[r].l = 1 * new Date(); a = s.createElement(o),
        m = s.getElementsByTagName(o)[0]; a.async = 1; a.src = g; m.parentNode.insertBefore(a, m)
    })(window, document, 'script', '//www.google-analytics.com/analytics.js', 'ga');

    ga('create', 'UA-45396411-1', 'azurewebsites.net');
    ga('send', 'pageview');



    $(document).ready(function () {
        $('input[datatype-datetime="dt"]').datetimepicker({
            format: 'm/d/Y h:i A',
            timepicker: true,
            closeOnDateSelect: true,
            formatTime: 'g:i A'
        });
        $('input[datatype-datetime="d"]').datetimepicker({
            format: 'm/d/Y',
            timepicker: false,
            closeOnDateSelect: true
        });
        $('[chosen-selection-box="multiple"]').chosen({});
        
 


        if ($('select#StoreDropDownId').length > 0) {

            $('select#StoreDropDownId').chosen({});

            $("#StoreId").val($('select#StoreDropDownId').val());
            $("#SelectedStoreText").text($("select#StoreDropDownId option:selected").text());
            
            if ($("#fileStoreId").length > 0) {
                $("#fileStoreId").val($("#StoreId").val());
            }
            $('select#StoreDropDownId').chosen({}).change(function (event) {
                $("#StoreId").val($(this).val());
				console.log($("select#StoreDropDownId option :selected").text());
              $("#SelectedStoreText").text($("select#StoreDropDownId option:selected").text());
                if ($("#fileStoreId").length > 0) {
                    $("#fileStoreId").val($("#StoreId").val());
                }
            });


        }


        $('[datatype-font-family="c"]').chosen({});
        $('[datatype-font-size="c"]').chosen({});

        $('input[datatype-color-mousehover="c"]').colpick({
            onChange: function (hsb, hex, rgb, el, bySetColor) {

                $(el).hover(function () {
                    $(this).css("color", '#' + hex);
                });
                // Fill the text box just if the color was set using the picker, and not the colpickSetColor function.
                if (!bySetColor) {
                    $(el).val(hex);
                }
                var storeId = $(el).attr("data-setting");
                var m = $('input[data-store-style=' + storeId + ']').val();
                var id = $(el).attr("data-color-component-id");
                $('[data-field-id=' + id + ']').hover(function () {
                    $(this).css("color", '#' + hex);
                });

            }
        }).keyup(function () {
            $(this).colpickSetColor(this.value);
        });


        $('input[datatype-color="c"]').colpick({
            onChange: function (hsb, hex, rgb, el, bySetColor) {
                $(el).css('border-color', '#' + hex);
                // Fill the text box just if the color was set using the picker, and not the colpickSetColor function.
                if (!bySetColor) {
                    $(el).val(hex);
                }
                var storeId = $(el).attr("data-setting");
                var m = $('input[data-store-style=' + storeId + ']').val();
                var id = $(el).attr("data-color-component-id");
                $('[data-field-id=' + id + ']').css('color', '#' + hex);

            }
        }).keyup(function () {
            $(this).colpickSetColor(this.value);
        });

        if ($('select#StoreAdminDropDownId').length > 0) {

            $('select#StoreAdminDropDownId').chosen({});


            $("#AdminSelectedStoreText").text($("select#StoreAdminDropDownId option:selected").text());


            $('select#StoreAdminDropDownId').chosen({}).change(function (event) {

                $("#AdminSelectedStoreText").text($("select#StoreAdminDropDownId option:selected").text());
                var originalURL = window.location.href;
                if (originalURL.split('?').length > 1) {
                    originalURL = originalURL.split('?')[0];
                }
                window.location.href = originalURL + "?storeId=" + $(this).val();
            });


        }

    });

</script>
